{"ast":null,"code":"var _jsxFileName = \"/home/hack/Documents/JSB09RT/minitwitter-main/frontend/src/components/Tweet.js\",\n    _s = $RefreshSig$();\n\nimport { Link, useNavigate } from \"react-router-dom\";\nimport { useContext, useState } from \"react\";\nimport { deleteTweetService } from \"../services\";\nimport { AuthContext } from \"../context/AuthContext\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport const Tweet = _ref => {\n  _s();\n\n  let {\n    tweet,\n    removeTweet\n  } = _ref;\n  const navigate = useNavigate();\n  const {\n    token,\n    user\n  } = useContext(AuthContext);\n  const [error, setError] = useState(\"\");\n\n  const deleteTweet = async id => {\n    try {\n      await deleteTweetService({\n        id,\n        token\n      });\n\n      if (removeTweet) {\n        removeTweet(id);\n      } else {\n        navigate(\"/\");\n      }\n    } catch (error) {\n      setError(error.message);\n    }\n  };\n\n  return /*#__PURE__*/_jsxDEV(\"article\", {\n    className: \"tweet\",\n    children: [/*#__PURE__*/_jsxDEV(\"p\", {\n      children: tweet.text\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 27,\n      columnNumber: 7\n    }, this), tweet.image ? /*#__PURE__*/_jsxDEV(\"img\", {\n      src: `${process.env.REACT_APP_BACKEND}/uploads/${tweet.image}`,\n      alt: tweet.text\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 29,\n      columnNumber: 9\n    }, this) : null, /*#__PURE__*/_jsxDEV(\"p\", {\n      children: [\"By \", /*#__PURE__*/_jsxDEV(Link, {\n        to: `/user/${tweet.user_id}`,\n        children: tweet.email\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 35,\n        columnNumber: 12\n      }, this), \" on\", \" \", /*#__PURE__*/_jsxDEV(Link, {\n        to: `/tweet/${tweet.id}`,\n        children: new Date(tweet.created_at).toLocaleString()\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 36,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 34,\n      columnNumber: 7\n    }, this), user && user.id === tweet.user_id ? /*#__PURE__*/_jsxDEV(\"section\", {\n      children: [/*#__PURE__*/_jsxDEV(\"button\", {\n        onClick: () => {\n          if (window.confirm(\"Are you sure?\")) deleteTweet(tweet.id);\n        },\n        children: \"Delete tweet\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 42,\n        columnNumber: 11\n      }, this), error ? /*#__PURE__*/_jsxDEV(\"p\", {\n        children: error\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 49,\n        columnNumber: 20\n      }, this) : null]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 41,\n      columnNumber: 9\n    }, this) : null]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 26,\n    columnNumber: 5\n  }, this);\n};\n\n_s(Tweet, \"pDTKazRusOpaJxj1HcM8Po1PYWo=\", false, function () {\n  return [useNavigate];\n});\n\n_c = Tweet;\n\nvar _c;\n\n$RefreshReg$(_c, \"Tweet\");","map":{"version":3,"names":["Link","useNavigate","useContext","useState","deleteTweetService","AuthContext","Tweet","tweet","removeTweet","navigate","token","user","error","setError","deleteTweet","id","message","text","image","process","env","REACT_APP_BACKEND","user_id","email","Date","created_at","toLocaleString","window","confirm"],"sources":["/home/hack/Documents/JSB09RT/minitwitter-main/frontend/src/components/Tweet.js"],"sourcesContent":["import { Link, useNavigate } from \"react-router-dom\";\nimport { useContext, useState } from \"react\";\nimport { deleteTweetService } from \"../services\";\nimport { AuthContext } from \"../context/AuthContext\";\n\nexport const Tweet = ({ tweet, removeTweet }) => {\n  const navigate = useNavigate();\n  const { token, user } = useContext(AuthContext);\n  const [error, setError] = useState(\"\");\n\n  const deleteTweet = async (id) => {\n    try {\n      await deleteTweetService({ id, token });\n\n      if (removeTweet) {\n        removeTweet(id);\n      } else {\n        navigate(\"/\");\n      }\n    } catch (error) {\n      setError(error.message);\n    }\n  };\n\n  return (\n    <article className=\"tweet\">\n      <p>{tweet.text}</p>\n      {tweet.image ? (\n        <img\n          src={`${process.env.REACT_APP_BACKEND}/uploads/${tweet.image}`}\n          alt={tweet.text}\n        />\n      ) : null}\n      <p>\n        By <Link to={`/user/${tweet.user_id}`}>{tweet.email}</Link> on{\" \"}\n        <Link to={`/tweet/${tweet.id}`}>\n          {new Date(tweet.created_at).toLocaleString()}\n        </Link>\n      </p>\n      {user && user.id === tweet.user_id ? (\n        <section>\n          <button\n            onClick={() => {\n              if (window.confirm(\"Are you sure?\")) deleteTweet(tweet.id);\n            }}\n          >\n            Delete tweet\n          </button>\n          {error ? <p>{error}</p> : null}\n        </section>\n      ) : null}\n    </article>\n  );\n};\n"],"mappings":";;;AAAA,SAASA,IAAT,EAAeC,WAAf,QAAkC,kBAAlC;AACA,SAASC,UAAT,EAAqBC,QAArB,QAAqC,OAArC;AACA,SAASC,kBAAT,QAAmC,aAAnC;AACA,SAASC,WAAT,QAA4B,wBAA5B;;AAEA,OAAO,MAAMC,KAAK,GAAG,QAA4B;EAAA;;EAAA,IAA3B;IAAEC,KAAF;IAASC;EAAT,CAA2B;EAC/C,MAAMC,QAAQ,GAAGR,WAAW,EAA5B;EACA,MAAM;IAAES,KAAF;IAASC;EAAT,IAAkBT,UAAU,CAACG,WAAD,CAAlC;EACA,MAAM,CAACO,KAAD,EAAQC,QAAR,IAAoBV,QAAQ,CAAC,EAAD,CAAlC;;EAEA,MAAMW,WAAW,GAAG,MAAOC,EAAP,IAAc;IAChC,IAAI;MACF,MAAMX,kBAAkB,CAAC;QAAEW,EAAF;QAAML;MAAN,CAAD,CAAxB;;MAEA,IAAIF,WAAJ,EAAiB;QACfA,WAAW,CAACO,EAAD,CAAX;MACD,CAFD,MAEO;QACLN,QAAQ,CAAC,GAAD,CAAR;MACD;IACF,CARD,CAQE,OAAOG,KAAP,EAAc;MACdC,QAAQ,CAACD,KAAK,CAACI,OAAP,CAAR;IACD;EACF,CAZD;;EAcA,oBACE;IAAS,SAAS,EAAC,OAAnB;IAAA,wBACE;MAAA,UAAIT,KAAK,CAACU;IAAV;MAAA;MAAA;MAAA;IAAA,QADF,EAEGV,KAAK,CAACW,KAAN,gBACC;MACE,GAAG,EAAG,GAAEC,OAAO,CAACC,GAAR,CAAYC,iBAAkB,YAAWd,KAAK,CAACW,KAAM,EAD/D;MAEE,GAAG,EAAEX,KAAK,CAACU;IAFb;MAAA;MAAA;MAAA;IAAA,QADD,GAKG,IAPN,eAQE;MAAA,+BACK,QAAC,IAAD;QAAM,EAAE,EAAG,SAAQV,KAAK,CAACe,OAAQ,EAAjC;QAAA,UAAqCf,KAAK,CAACgB;MAA3C;QAAA;QAAA;QAAA;MAAA,QADL,SACiE,GADjE,eAEE,QAAC,IAAD;QAAM,EAAE,EAAG,UAAShB,KAAK,CAACQ,EAAG,EAA7B;QAAA,UACG,IAAIS,IAAJ,CAASjB,KAAK,CAACkB,UAAf,EAA2BC,cAA3B;MADH;QAAA;QAAA;QAAA;MAAA,QAFF;IAAA;MAAA;MAAA;MAAA;IAAA,QARF,EAcGf,IAAI,IAAIA,IAAI,CAACI,EAAL,KAAYR,KAAK,CAACe,OAA1B,gBACC;MAAA,wBACE;QACE,OAAO,EAAE,MAAM;UACb,IAAIK,MAAM,CAACC,OAAP,CAAe,eAAf,CAAJ,EAAqCd,WAAW,CAACP,KAAK,CAACQ,EAAP,CAAX;QACtC,CAHH;QAAA;MAAA;QAAA;QAAA;QAAA;MAAA,QADF,EAQGH,KAAK,gBAAG;QAAA,UAAIA;MAAJ;QAAA;QAAA;QAAA;MAAA,QAAH,GAAoB,IAR5B;IAAA;MAAA;MAAA;MAAA;IAAA,QADD,GAWG,IAzBN;EAAA;IAAA;IAAA;IAAA;EAAA,QADF;AA6BD,CAhDM;;GAAMN,K;UACML,W;;;KADNK,K"},"metadata":{},"sourceType":"module"}