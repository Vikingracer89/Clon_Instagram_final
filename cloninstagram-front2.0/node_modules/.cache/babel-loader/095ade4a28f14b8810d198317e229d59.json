{"ast":null,"code":"var _jsxFileName = \"/home/hack/Documents/JSB09RT/Clon_Instagram_final/cloninstagram-front2.0/src/components/Post.js\",\n    _s = $RefreshSig$();\n\nimport { Link, useNavigate } from \"react-router-dom\";\nimport { useContext, useState } from \"react\";\nimport { deletePostService } from \"../services\";\nimport { AuthContext } from \"../context/AuthContext\";\nimport { LikeButton } from \"./Like\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport const Post = _ref => {\n  _s();\n\n  let {\n    post,\n    removePost\n  } = _ref;\n  const navigate = useNavigate();\n  const {\n    token,\n    user\n  } = useContext(AuthContext);\n  const [error, setError] = useState(\"\");\n\n  const deletePhoto = async id => {\n    try {\n      await deletePostService({\n        id,\n        token\n      });\n\n      if (removePost) {\n        removePost(id);\n      } else {\n        navigate(\"/\");\n      }\n    } catch (error) {\n      setError(error.message);\n    }\n  };\n\n  return /*#__PURE__*/_jsxDEV(\"article\", {\n    className: \"Photo\",\n    children: [/*#__PURE__*/_jsxDEV(\"p\", {\n      children: post.text\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 28,\n      columnNumber: 7\n    }, this), post.image ? /*#__PURE__*/_jsxDEV(Link, {\n      to: `/photo/${post.id}`,\n      children: /*#__PURE__*/_jsxDEV(\"img\", {\n        src: `${process.env.REACT_APP_BACKEND}/uploads/${post.image}`,\n        alt: post.text\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 31,\n        columnNumber: 11\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 30,\n      columnNumber: 9\n    }, this) : null, user ? /*#__PURE__*/_jsxDEV(\"p\", {\n      children: [\"By \", /*#__PURE__*/_jsxDEV(Link, {\n        to: `/user/${post.user_id}`,\n        children: post.email\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 39,\n        columnNumber: 14\n      }, this), \" on\", \" \", new Date(post.created_at).toLocaleString()]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 38,\n      columnNumber: 9\n    }, this) : null, user && user.id === post.user_id ? /*#__PURE__*/_jsxDEV(\"section\", {\n      children: [/*#__PURE__*/_jsxDEV(\"button\", {\n        onClick: () => {\n          if (window.confirm(\"¿Estas seguro de que quieres borrar este Post?\")) deletePhoto(post.id);\n        },\n        children: \"Borrar Post\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 45,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(LikeButton, {\n        like: like\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 55,\n        columnNumber: 11\n      }, this), error ? /*#__PURE__*/_jsxDEV(\"p\", {\n        children: error\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 56,\n        columnNumber: 20\n      }, this) : null]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 44,\n      columnNumber: 9\n    }, this) : null]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 27,\n    columnNumber: 5\n  }, this);\n};\n\n_s(Post, \"pDTKazRusOpaJxj1HcM8Po1PYWo=\", false, function () {\n  return [useNavigate];\n});\n\n_c = Post;\n\nvar _c;\n\n$RefreshReg$(_c, \"Post\");","map":{"version":3,"names":["Link","useNavigate","useContext","useState","deletePostService","AuthContext","LikeButton","Post","post","removePost","navigate","token","user","error","setError","deletePhoto","id","message","text","image","process","env","REACT_APP_BACKEND","user_id","email","Date","created_at","toLocaleString","window","confirm","like"],"sources":["/home/hack/Documents/JSB09RT/Clon_Instagram_final/cloninstagram-front2.0/src/components/Post.js"],"sourcesContent":["import { Link, useNavigate } from \"react-router-dom\";\nimport { useContext, useState } from \"react\";\nimport { deletePostService } from \"../services\";\nimport { AuthContext } from \"../context/AuthContext\";\nimport { LikeButton } from \"./Like\";\n\nexport const Post = ({ post, removePost }) => {\n  const navigate = useNavigate();\n  const { token, user } = useContext(AuthContext);\n  const [error, setError] = useState(\"\");\n\n  const deletePhoto = async (id) => {\n    try {\n      await deletePostService({ id, token });\n\n      if (removePost) {\n        removePost(id);\n      } else {\n        navigate(\"/\");\n      }\n    } catch (error) {\n      setError(error.message);\n    }\n  };\n\n  return (\n    <article className=\"Photo\">\n      <p>{post.text}</p>\n      {post.image ? (\n        <Link to={`/photo/${post.id}`}>\n          <img\n            src={`${process.env.REACT_APP_BACKEND}/uploads/${post.image}`}\n            alt={post.text}\n          />\n        </Link>\n      ) : null}\n      {user ? (\n        <p>\n          By <Link to={`/user/${post.user_id}`}>{post.email}</Link> on{\" \"}\n          {new Date(post.created_at).toLocaleString()}\n        </p>\n      ) : null}\n      {user && user.id === post.user_id ? (\n        <section>\n          <button\n            onClick={() => {\n              if (\n                window.confirm(\"¿Estas seguro de que quieres borrar este Post?\")\n              )\n                deletePhoto(post.id);\n            }}\n          >\n            Borrar Post\n          </button>\n          <LikeButton like={like} />\n          {error ? <p>{error}</p> : null}\n        </section>\n      ) : null}\n    </article>\n  );\n};\n"],"mappings":";;;AAAA,SAASA,IAAT,EAAeC,WAAf,QAAkC,kBAAlC;AACA,SAASC,UAAT,EAAqBC,QAArB,QAAqC,OAArC;AACA,SAASC,iBAAT,QAAkC,aAAlC;AACA,SAASC,WAAT,QAA4B,wBAA5B;AACA,SAASC,UAAT,QAA2B,QAA3B;;AAEA,OAAO,MAAMC,IAAI,GAAG,QAA0B;EAAA;;EAAA,IAAzB;IAAEC,IAAF;IAAQC;EAAR,CAAyB;EAC5C,MAAMC,QAAQ,GAAGT,WAAW,EAA5B;EACA,MAAM;IAAEU,KAAF;IAASC;EAAT,IAAkBV,UAAU,CAACG,WAAD,CAAlC;EACA,MAAM,CAACQ,KAAD,EAAQC,QAAR,IAAoBX,QAAQ,CAAC,EAAD,CAAlC;;EAEA,MAAMY,WAAW,GAAG,MAAOC,EAAP,IAAc;IAChC,IAAI;MACF,MAAMZ,iBAAiB,CAAC;QAAEY,EAAF;QAAML;MAAN,CAAD,CAAvB;;MAEA,IAAIF,UAAJ,EAAgB;QACdA,UAAU,CAACO,EAAD,CAAV;MACD,CAFD,MAEO;QACLN,QAAQ,CAAC,GAAD,CAAR;MACD;IACF,CARD,CAQE,OAAOG,KAAP,EAAc;MACdC,QAAQ,CAACD,KAAK,CAACI,OAAP,CAAR;IACD;EACF,CAZD;;EAcA,oBACE;IAAS,SAAS,EAAC,OAAnB;IAAA,wBACE;MAAA,UAAIT,IAAI,CAACU;IAAT;MAAA;MAAA;MAAA;IAAA,QADF,EAEGV,IAAI,CAACW,KAAL,gBACC,QAAC,IAAD;MAAM,EAAE,EAAG,UAASX,IAAI,CAACQ,EAAG,EAA5B;MAAA,uBACE;QACE,GAAG,EAAG,GAAEI,OAAO,CAACC,GAAR,CAAYC,iBAAkB,YAAWd,IAAI,CAACW,KAAM,EAD9D;QAEE,GAAG,EAAEX,IAAI,CAACU;MAFZ;QAAA;QAAA;QAAA;MAAA;IADF;MAAA;MAAA;MAAA;IAAA,QADD,GAOG,IATN,EAUGN,IAAI,gBACH;MAAA,+BACK,QAAC,IAAD;QAAM,EAAE,EAAG,SAAQJ,IAAI,CAACe,OAAQ,EAAhC;QAAA,UAAoCf,IAAI,CAACgB;MAAzC;QAAA;QAAA;QAAA;MAAA,QADL,SAC+D,GAD/D,EAEG,IAAIC,IAAJ,CAASjB,IAAI,CAACkB,UAAd,EAA0BC,cAA1B,EAFH;IAAA;MAAA;MAAA;MAAA;IAAA,QADG,GAKD,IAfN,EAgBGf,IAAI,IAAIA,IAAI,CAACI,EAAL,KAAYR,IAAI,CAACe,OAAzB,gBACC;MAAA,wBACE;QACE,OAAO,EAAE,MAAM;UACb,IACEK,MAAM,CAACC,OAAP,CAAe,gDAAf,CADF,EAGEd,WAAW,CAACP,IAAI,CAACQ,EAAN,CAAX;QACH,CANH;QAAA;MAAA;QAAA;QAAA;QAAA;MAAA,QADF,eAWE,QAAC,UAAD;QAAY,IAAI,EAAEc;MAAlB;QAAA;QAAA;QAAA;MAAA,QAXF,EAYGjB,KAAK,gBAAG;QAAA,UAAIA;MAAJ;QAAA;QAAA;QAAA;MAAA,QAAH,GAAoB,IAZ5B;IAAA;MAAA;MAAA;MAAA;IAAA,QADD,GAeG,IA/BN;EAAA;IAAA;IAAA;IAAA;EAAA,QADF;AAmCD,CAtDM;;GAAMN,I;UACMN,W;;;KADNM,I"},"metadata":{},"sourceType":"module"}